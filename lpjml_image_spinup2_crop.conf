/**************************************************************************************/
/**                                                                                \n**/
/**                   l  p  j  m  l  .  c  o  n  f                                 \n**/
/**                                                                                \n**/
/** Configuration file for LPJmL C Version 4.0.002 coupled to IMAGE                \n**/
/**                                                                                \n**/
/** Configuration file is divided into five sections:                              \n**/
/**                                                                                \n**/
/**  I.   Simulation description and type section                                  \n**/
/**  II.  Input parameter section                                                  \n**/
/**  III. Input data section                                                       \n**/
/**  IV.  Output data section                                                      \n**/
/**  V.   Run settings section                                                     \n**/
/**                                                                                \n**/
/** (C) Potsdam Institute for Climate Impact Research (PIK), see COPYRIGHT file    \n**/
/** authors, and contributors see AUTHORS file                                     \n**/
/** This file is part of LPJmL and licensed under GNU AGPL Version 3               \n**/
/** or later. See LICENSE file or go to http://www.gnu.org/licenses/               \n**/
/** Contact: https://github.com/PIK-LPJmL/LPJmL                                    \n**/
/**                                                                                \n**/
/**************************************************************************************/

#include "include/conf.h" /* include constant definitions */

#define FROM_RESTART
#define RIVER_ROUTING /*river routing enabled; exclude this line to disable river routing */
#define ISRANDOM      /* random generation of daily precipitation */
//#define BENCHMARK_LAI 5 /* also set value here directly (1 to 7), not in /par/param.par */
#define WITH_LAIMAX_CFT
#define PERMAFROST
#define GSI_PHENOLOGY
#ifdef FROM_RESTART
#define WITH_LANDUSE LANDUSE /* landuse options: NO_LANDUSE (natural vegetation), LANDUSE (cropfracs from input), CONST_LANDUSE (landuse extent fixed, year specified in param.par), ALL_CROPS (all crops cultivated in all cells, requires POT_IRRIGATION) */
#endif
#define IRRIGATION LIM_IRRIGATION /* irrigation options: NO_IRRIGATION (irrigated cropfracs added to rain-fed), LIM_IRRIGATION (requires #define RIVER_ROUTING), POT_IRRIGATION, ALL_IRRIGATION (rain-fed cropfracs added to irrigation) */
//#define FIX_SDATES
//#define WITH_SPITFIRE
/* #define WITH_FIREWOOD */
/* #define WITH_GRIDBASED grid based PFT output_SPITFIRE-optpar enabled */
/* #define WITH_FIXED_GRASS_PFT */
/* #define WITH_GRASS_SCENARIOS */
/* #define DAILY_OUTPUT */

/*===================================================================*/
/*  I. Simulation description and type section                       */
/*===================================================================*/

"LPJmL Run" /* Simulation description */
LPJML                    /*LPJML Simulation type with managed land use */
#ifdef ISRANDOM
 RANDOM_PREC /* Random weather generator for precipitation enabled */
RANDOM_SEED /* seed for random number generator */
#else
 INTERPOLATE_PREC
#endif
#ifdef USE_RADIATION
 RADIATION
#else
 CLOUDINESS
#endif
#ifdef WITH_SPITFIRE
 SPITFIRE
NESTEROV_INDEX
#else
 FIRE                 /* fire disturbance enabled */
#endif
#ifdef WITH_FIREWOOD
 FIREWOOD
 #ifndef WITH_LANDUSE
  #define WITH_LANDUSE 0
 #endif
#else
 NO_FIREWOOD
#endif
#if defined(WITH_SPITFIRE) || defined(WITH_FIREWOOD)
 #ifndef FROM_RESTART
  NO_POPULATION
 #else
  POPULATION
 #endif
 #else
 NO_POPULATION
 #endif
#ifdef USE_BURNTAREA
PRESCRIBE_BURNTAREA
#else
NO_PRESCRIBE_BURNTAREA
#endif
#ifdef USE_LANDCOVER
LANDCOVERFPC /* LANDCOVEREST to prescribe establishment or LANDCOVERFPC to prescribe maximum FPC */
#else
NO_LANDCOVER
#endif
#ifdef GSI_PHENOLOGY
NEW_PHENOLOGY
#else
OLD_PHENOLOGY
#endif
#ifdef RIVER_ROUTING
 DRAINAGE
#else
 NO_DRAINAGE
#endif
#ifdef FROM_RESTART
NO_EQUILSOIL
#else
EQUILSOIL
#endif
#ifdef PERMAFROST
 PERM
#else
 NO_PERM
#endif
#ifdef WITH_LANDUSE
 #if WITH_LANDUSE == CONST_LANDUSE
CONST_LANDUSE             
2000      /* set landuse year for LANDUSE_CONST case */
 #elif WITH_LANDUSE == ALL_CROPS
ALL_CROPS
2000      /* set landuse year for LANDUSE_CONST case */
 #elif WITH_LANDUSE == NO_LANDUSE
  NO_LANDUSE
  #undef WITH_LANDUSE
 #else 
LANDUSE
 #endif
#else
 NO_LANDUSE
#endif /* WITH_LANDUSE is no longer defined, if WITH_LANDUSE NO_LANDUSE was set above */
#ifdef WITH_LANDUSE
 #if defined(FIX_SDATES)
  FIXED_SDATE
1970      /* year in which sowing dates shall be fixed */
 #elif defined(READ_SDATES)
  PRESCRIBED_SDATE
1970      /* year in which sowing dates shall be fixed */
 #else
  NO_FIXED_SDATE
 #endif
IRRIGATION /* NO_IRRIGATION, LIM_IRRIGATION, POT_IRRIGATION, ALL_IRRIGATION */
1          /* intercrops on setaside (0:FALSE, 1:TRUE) */
0          /* remove residuals (0:FALSE, 1:TRUE) */
0          /* fire in  residuals (0:FALSE, 1:TRUE) */
#ifdef WITH_RWMANAGEMENT
RWMANAGEMENT
#else
NO_RWMANAGEMENT
#endif
#ifdef BENCHMARK_LAI
CONST_LAI_MAX
BENCHMARK_LAI
#undef WITH_LAIMAX_CFT
#else
#ifdef WITH_LAIMAX_CFT
LAIMAX_CFT /* laimax values from manage parameter file */
#else
LAIMAX_INTERPOLATE
#endif
#endif
#ifdef RIVER_ROUTING
#ifdef WITH_RESERVOIRS
RESERVOIR
#else
NO_RESERVOIR
#endif
#ifdef WITH_GROUNDWATER_IRRIG
GROUNDWATER_IRRIG
#else
NO_GROUNDWATER_IRRIG
#endif
#ifdef WITH_AQUIFER_IRRIG
AQUIFER_IRRIG
#else
NO_AQUIFER_IRRIG
#endif
#endif
#ifdef WITH_FIXED_GRASS_PFT
GRASS_FIXED_PFT
#else
NO_GRASS_FIXED_PFT
#endif
NO_GRASS_HARVEST_OPTIONS
#endif
#if defined(WITH_WATERUSE) && defined(WITH_LANDUSE)
 WATERUSE
#else
 NO_WATERUSE
#endif

/*===================================================================*/
/*  II. Input parameter section                                      */
/*===================================================================*/

#include "param_wp.conf"    /* Input parameter file */

/*===================================================================*/
/*  III. Input data section                                          */
/*===================================================================*/

#include "input_image.conf"    /* Input files of CRU dataset */

#if defined(WITH_WATERUSE) && defined(WITH_LANDUSE)
CLM2 /p/projects/lpjml/input/historical/input_VERSION2/wateruse_1900_2000.bin /* water consumption for industry,household and livestock */
CLM2 /p/projects/lpjml/input/historical/input_VERSION2/wateruse_1900_2000.bin /* water consumption for industry,household and livestock */
#endif

/*===================================================================*/
/*  IV. Output data section                                          */
/*===================================================================*/

#ifdef WITH_GRIDBASED
GRIDBASED
#define SUFFIX grid.bin
#else
PFTBASED
#define SUFFIX pft.bin
#endif

#ifndef FROM_RESTART

END            /* no output_SPITFIRE-optpar files */

#else

/*
ID                  Fmt filename
------------------- --- ----------------------------- */
GRID                RAW output/grid.bin
#ifdef WITH_LANDUSE
PFT_HARVEST         RAW output/pft_harvest.SUFFIX
CFTFRAC             RAW output/cftfrac.bin
#endif
/*----------------- --- ------------------------------- */
END
#ifdef DAILY_OUTPUT
TEMPERATE_CEREALS  /* CFT for daily output_SPITFIRE-optpar */
DAILY_RAINFED      /* irrigation flag for daily output_SPITFIRE-optpar */
#endif
#endif

/*===================================================================*/
/*  V. Run settings section                                          */
/*===================================================================*/

ALL /* all grid cells */

#ifndef FROM_RESTART

300  /* spinup years */
/* exclude next line in case of 0 spinup years */
30   /* cycle length during spinup (yr) */
1901 /* first year of simulation */
1901 /* last year of simulation */
NO_RESTART /* do not start from restart file */

RESTART /* create restart file: the last year of simulation=restart-year */
restart/restart_image_lpj_crop.lpj /* filename of restart file */
1969 /* write restart at year; exclude line in case of no restart to be written */

#else

300  /* spinup years */
/* exclude next line in case of 0 spinup years */
30  /*cycle length during spinup (yr)*/ 
1901 /* first year of simulation */
1969 /* last year of simulation */
RESTART /* start from restart file */
restart/restart_image_lpj_pnv.lpj /* filename of input restart file */
RESTART /* create restart file */
restart/restart_IM32_lpjBM.lpj /* filename of output restart file */
1969 /* write restart at year; exclude line in case of no restart to be written */

#endif
