.TH flux_sum 3  "LPJmL programmers manual"
.SH NAME
flux_sum \- Calculates global carbon and water fluxes
.SH SYNOPSIS
.nf
\fB#include "lpj.h"

Real flux_sum(Flux *\fIflux\fB,const Cell \fIgrid\fB[],const Config *\fIconfig\fB);\fP

.fi
.SH DESCRIPTION
Function calculates global carbon and water fluxes.
The arguments of \fBflux_sum\fP are:
.TP
.I flux
Pointer to flux struct. \fBFlux\fP is defined in \fIoutput.h\fP as follows:
.nf

\fBtypedef struct
{
  Real npp;      /**< Total NPP (gC/yr) */
  Real gpp;      /**< Total GPP (gC/yr) */
  Real rh;       /**< Total heterotrophic respiration (gC/yr) */
  Stocks fire;   /**< Total fire (gC/yr,gN/yr) */
  Stocks estab;  /**< Total extablishment flux (gC/yr,gN/yr) */
  Stocks harvest;/**< Total harvested carbon (gC/yr,gN/yr) */
  Real transp;   /**< Total transpiration (dm3/yr) */
  Real evap;     /**< Total evaporation (dm3/yr) */
  Real interc;   /**< Total interception (dm3/yr) */
  Real wd;       /**< Total irrigation water withdrawal (dm3/yr) */
  Real wd_unsustainable;      /**< Total irrigation water withdrawal from unsustainable source (dm3/yr) */
  Real wateruse;              /**< Total wateruse for household industry and livestock (dm3/yr) */
  Real discharge;             /**< Total discharge (dm3/yr) */
  Real ext;                   /**< Total external flux (dm3/yr) */
  Real evap_lake;             /**< Total evaporation from lakes (dm3/yr) */
  Real evap_res;              /**< Total evaporation from reservoirs (dm3/yr) */
  Real irrig;                 /**< Total field irrigation (dm3/yr) */
  Real conv_loss_evap;        /**< Total evaporation during conveyance (dm3/yr) */
  Real prec;                  /**< Total precipitation (dm3/yr) */
  Real delta_surface_storage; /**< Total change of surface storage (dm3/yr), increase positive */
  Real delta_soil_storage;    /**< Total change of soil storage (dm3/yr), increase positive */
  Real area;                  /**< Total area (m2) */
  Real total_reservoir_out;   /**< Total water extracted from reservoirs for irrigation */
  Real total_irrig_from_reservoir; /*Total water added to fields from reservoirs */
  Real n_demand;              /**< total N demand by plants (gN/yr) */
  Real n_uptake;              /**< total N uptake by plants (gN/yr) */
  Stocks influx;              /**< total inputs (gC/yr,gN/yr) */
  Real n_outflux;             /**< total N losses (gN/yr) */
  Real excess_water;          /**< Exess water (dm3) */
  Stocks soil;                /**< soil stocks (gC,gN) */
  Stocks soil_slow;           /**< slow soil stocks (gC,gN) */
  Stocks lit;                 /**< litter stocks (gC,gN) */
  Stocks veg;                 /**< vegetation stocks (gC,gN) */
  Stocks product;             /**< product pool (gC,gN) */
  Stocks product_turnover;    /**< product pool turnover (gC/yr,gN/yr) */
  Stocks neg_fluxes;
  Stocks estab_storage;       /**< Storage for establishment (gC, gN) */
  Real area_agr;              /**< agriculture area (m2) */
} Flux;
.fi
.TP
.I grid
Cell grid array allocated and initialized by \fBnewgrid()\fP.
.TP
.I config
LPJmL configuration data. Must be read by \fBreadconfig()\fP.
.SH RETURN VALUE
Upon successful completion the total carbon flux in (gC) is returned.

.SH AUTHORS

For authors and contributors see AUTHORS file

.SH COPYRIGHT

(C) Potsdam Institute for Climate Impact Research (PIK), see COPYRIGHT file

.SH SEE ALSO
readconfig(3), newgrid(3), fprintflux(3)
