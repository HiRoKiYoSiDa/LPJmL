/**************************************************************************************/
/**                                                                                \n**/
/**                   l  p  j  m  l  .  c  o  n  f                                 \n**/
/**                                                                                \n**/
/** Default configuration file for couled IMAGE_LPJmL run                          \n**/
/**                                                                                \n**/
/** Configuration file is divided into five sections:                              \n**/
/**                                                                                \n**/
/**  I.   Simulation description and type section                                  \n**/
/**  II.  Input parameter section                                                  \n**/
/**  III. Input data section                                                       \n**/
/**  IV.  Output data section                                                      \n**/
/**  V.   Run settings section                                                     \n**/
/**                                                                                \n**/
/** (C) Potsdam Institute for Climate Impact Research (PIK), see COPYRIGHT file    \n**/
/** authors, and contributors see AUTHORS file                                     \n**/
/** This file is part of LPJmL and licensed under GNU AGPL Version 3               \n**/
/** or later. See LICENSE file or go to http://www.gnu.org/licenses/               \n**/
/** Contact: https://github.com/PIK-LPJmL/LPJmL                                    \n**/
/**                                                                                \n**/
/**************************************************************************************/

#include "include/conf.h" /* include constant definitions */

#define FROM_RESTART /* run from restart */
#define RIVER_ROUTING /*river routing enabled; exclude this line to disable river routing */
#define ISRANDOM      /* random generation of daily precipitation */
//#define BENCHMARK_LAI 5 /* also set value here directly (1 to 7), not in /par/param.par */
#define WITH_LAIMAX_CFT
#define PERMAFROST
#define GSI_PHENOLOGY
#ifdef FROM_RESTART
#define WITH_RESERVOIRS
//#define WITH_WATERUSE
#define WITH_LANDUSE LANDUSE /* landuse options: NO_LANDUSE (natural vegetation), LANDUSE (cropfracs from input), CONST_LANDUSE (landuse extent fixed, year specified in param.par), ALL_CROPS (all crops cultivated in all cells, requires POT_IRRIGATION) */
#endif
#define IRRIGATION LIM_IRRIGATION /* irrigation options: NO_IRRIGATION (irrigated cropfracs added to rain-fed), LIM_IRRIGATION (requires #define RIVER_ROUTING), POT_IRRIGATION, ALL_IRRIGATION (rain-fed cropfracs added to irrigation) */
/*#define FIX_SDATES: fix sowing dates after year specified in param.par; READ_SDATES: read sowing dates from file */
/*#define WITH_FIREWOOD*/
/*#define WITH_GRIDBASED   grid based PFT output enabled */
/*#define DAILY_OUTPUT*/
#define WITH_GROUNDWATER_IRRIG

/*===================================================================*/
/*  I. Simulation description and type section                       */
/*===================================================================*/

"LPJmL Run" /* Simulation description */
LPJML_IMAGE                    /*LPJML Simulation type with managed land use */
#ifdef ISRANDOM
RANDOM_PREC /* Random weather generator for precipitation enabled */
10 /* seed for random number generator */
#else
INTERPOLATE_PREC
#endif
#ifdef USE_RADIATION
RADIATION
#else
CLOUDINESS
#endif
#ifdef WITH_SPITFIRE
SPITFIRE
NESTEROV_INDEX
#else
FIRE                 /* fire disturbance enabled */
#endif
#ifdef WITH_FIREWOOD
FIREWOOD
#ifndef WITH_LANDUSE
#define WITH_LANDUSE 0
#endif
#else
NO_FIREWOOD
#endif
#if defined(WITH_SPITFIRE) || defined(WITH_FIREWOOD)
#ifndef FROM_RESTART
NO_POPULATION
#else
POPULATION
#endif
#else
NO_POPULATION
#endif
#ifdef USE_BURNTAREA
PRESCRIBE_BURNTAREA
#else
NO_PRESCRIBE_BURNTAREA
#endif
#ifdef USE_LANDCOVER
LANDCOVERFPC /* LANDCOVEREST to prescribe establishment or LANDCOVERFPC to prescribe maximum FPC */
#else
NO_LANDCOVER
#endif
#ifdef GSI_PHENOLOGY
NEW_PHENOLOGY
#else
OLD_PHENOLOGY
#endif
#ifdef RIVER_ROUTING
DRAINAGE
#else
NO_DRAINAGE
#endif
#ifdef PERMAFROST
PERM
#else
NO_PERM
#endif
#ifdef WITH_LANDUSE
#if WITH_LANDUSE == CONST_LANDUSE
CONST_LANDUSE
2000      /* set landuse year for LANDUSE_CONST case */
#elif WITH_LANDUSE == ALL_CROPS
ALL_CROPS
2000      /* set landuse year for LANDUSE_CONST case */
#elif WITH_LANDUSE == NO_LANDUSE
NO_LANDUSE
#undef WITH_LANDUSE
#else 
LANDUSE
#endif
#else
NO_LANDUSE
#endif /* WITH_LANDUSE is no longer defined, if WITH_LANDUSE NO_LANDUSE was set above */
#ifdef WITH_LANDUSE
#if defined(FIX_SDATES)
FIXED_SDATE
1970      /* year in which sowing dates shall be fixed */
#elif defined(READ_SDATES)
PRESCRIBED_SDATE
1970      /* year in which sowing dates shall be fixed */
#else
NO_FIXED_SDATE
#endif
IRRIGATION /* NO_IRRIGATION, LIM_IRRIGATION, POT_IRRIGATION, ALL_IRRIGATION */
1          /* intercrops on setaside (0:FALSE, 1:TRUE) */
0          /* remove residuals (0:FALSE, 1:TRUE) */
0          /* fire in  residuals (0:FALSE, 1:TRUE) */
#ifdef WITH_RWMANAGEMENT
RWMANAGEMENT
#else
NO_RWMANAGEMENT
#endif
#ifdef BENCHMARK_LAI
CONST_LAI_MAX
BENCHMARK_LAI
#undef WITH_LAIMAX_CFT
#else
#ifdef WITH_LAIMAX_CFT
LAIMAX_CFT /* laimax values from manage parameter file */
#else
LAIMAX_INTERPOLATE
#endif
#endif
#ifdef RIVER_ROUTING
#ifdef WITH_RESERVOIRS
RESERVOIR
#else
NO_RESERVOIR
#endif
#ifdef WITH_GROUNDWATER_IRRIG
GROUNDWATER_IRRIG
#else
NO_GROUNDWATER_IRRIG
#endif
#ifdef WITH_AQUIFER_IRRIG
AQUIFER_IRRIG
#else
NO_AQUIFER_IRRIG
#endif
#endif
#ifdef WITH_FIXED_GRASS_PFT
GRASS_FIXED_PFT
#else
NO_GRASS_FIXED_PFT
#endif
NO_GRASS_HARVEST_OPTIONS
#endif
#if defined(WITH_WATERUSE) && defined(WITH_LANDUSE)
WATERUSE
#else
NO_WATERUSE
#endif

/*===================================================================*/
/*  II. Input parameter section                                      */
/*===================================================================*/

#include "param_wp.conf"    /* Input parameter file */

/*===================================================================*/
/*  III. Input data section                                          */
/*===================================================================*/

#include "input_image_win.conf"    /* Input files of CRU dataset */

//#ifdef WITH_WATERUSE
//input/wateruse1901_2003.bin /* water consumption for //industry,household and livestock */
//#endif

/*===================================================================*/
/*  IV. Output data section                                          */
/*===================================================================*/

#ifdef WITH_GRIDBASED
GRIDBASED
#define SUFFIX grid.bin
#else
PFTBASED
#define SUFFIX pft.bin
#endif

#ifndef FROM_RESTART

END	            /* no output files */

#else

/*
ID                  fmt filename
------------------- --- ----------------------------- */
//GRID                CDF output/grid.nc 
//FPC                 CDF output/fpc.nc
//MNPP                CDF output/mnpp.nc
/*MGPP                CDF output/mgpp.nc*/
//MRH                 CDF output/mrh.nc
//MFPAR               CDF output/mfpar.nc
//MTRANSP             CDF output/mtransp.nc
//MRUNOFF             CDF output/mrunoff.nc
//MEVAP               CDF output/mevap.nc
//MINTERC             CDF output/minterc.nc
/*MSWC1               CDF output/mswc1.nc*/
/*MSWC2               CDF output/mswc2.nc*/
//MIRRIG              CDF output/mirrig.nc
//MCONV_LOSS          CDF output/mconv_loss.nc
/*AIRRIG	            CDF output/airrig.nc*/
//ACONV_LOSS          CDF output/aconv_loss.nc
//FIREC               CDF output/firec.nc
/*FIREF               CDF output/firef.nc*/
VEGC                CDF output/vegc.nc
SOILC               CDF output/soilc.nc
LITC                CDF output/litc.nc
WFT_VEGC                CDF output/wft_vegc.nc
//PROD_TURNOVER       CDF output/prod_turnover.nc
//DEFOREST_EMIS       CDF output/deforest_emis.nc
//TRAD_BIOFUEL        CDF output/trad_biofuel.nc
/*MTEMP_IMAGE         CDF output/mtemp_image.nc*/
/*MPREC_IMAGE         CDF output/mprec_image.nc*/
/*MSUN_IMAGE          CDF output/msun_image.nc*/
/*MWET_IMAGE          CDF output/mwet_image.nc*/
/*FBURN               CDF output/fburn.nc*/
/*FTIMBER             CDF output/ftimber.nc*/
//TIMBER_HARVEST      CDF output/timber_harvest.nc
//PRODUCT_POOL_FAST   CDF output/product_pool_fast.nc
//PRODUCT_POOL_SLOW   CDF output/product_pool_slow.nc
/*LUC_IMAGE           CDF output/luc_image.nc*/
/*PFT_GCGP            CDF output/waterstress.nc */ 
//PFT_NPP             CDF output/pft_npp.nc
//FLUX_ESTAB          CDF output/flux_estab.nc
#ifdef WITH_LANDUSE
//HARVEST             CDF output/flux_harvest.nc
//SDATE               CDF output/sdate.nc
//PFT_HARVEST         CDF output/pft_harvest.nc
/*PFT_RHARVEST        CDF output/pft_rharvest.nc*/
//CFTFRAC             CDF output/cftfrac.nc
//MGCONS_RF			CDF output/mgcons_rf.nc
//MGCONS_IRR			CDF output/mgcons_irr.nc
//MBCONS_IRR			CDF output/mbcons_irr.nc
//MIRRIG_RW			CDF output/mirrig_rf.nc
//CFT_CONSUMP_WATER_G	CDF output/cft_consump_water_g.nc
//CFT_CONSUMP_WATER_B	CDF output/cft_consump_water_b.nc
//CFT_TRANSP_B		CDF output/cft_trans_b.nc
//CFT_INTERC_B		CDF output/cft_interc_b.nc
//CFT_EVAP_B			CDF output/cft_evap_b.nc
//CFT_CONV_LOSS_EVAP	CDF output/cft_conv_loss_evap.nc
//CFT_CONV_LOSS_DRAIN	CDF output/cft_conv_loss_drain.nc
//CFT_RETURN_FLOW_B	CDF output/cft_return_flow_b.nc
#endif
#ifdef WITH_FIREWOOD
/*FLUX_FIREWOOD       CDF output/flux_firewood.nc*/
#endif
/*APREC               CDF output/aprec.nc*/
#ifdef RIVER_ROUTING
//INPUT_LAKE          CDF output/input_lake.nc
//MEVAP_LAKE          CDF output/mevap_lake.nc
//ADISCHARGE          CDF output/adischarge.nc
//MDISCHARGE          CDF output/mdischarge.nc
//YDISCHARGE     	    CDF output/ydischarge.nc
#ifdef WITH_RESERVOIRS
//MRES_CAP	    CDF output/mres_cap.nc
//MRES_STORAGE	    CDF output/mres_storage.nc
#endif
#endif
#ifdef DAILY_OUTPUT
D_LAI               CDF output/d_lai.nc
D_PHEN              CDF output/d_phen.nc
D_CLEAF             CDF output/d_cleaf.nc
D_CROOT             CDF output/d_croot.nc
D_CSO               CDF output/d_cso.nc
D_CPOOL             CDF output/d_cpool.nc
D_WDF               CDF output/d_wdf.nc
D_GROWINGDAY        CDF output/d_growingday.nc
D_PVD               CDF output/d_pvd.nc
D_PHU               CDF output/d_phu.nc
D_FPHU              CDF output/d_fphu.nc
D_LAIMAXAD          CDF output/d_laimax_adjusted.nc
D_LAINPPDEF         CDF output/d_laimaxnppdeficit.nc
D_HUSUM             CDF output/d_husum.nc
D_VDSUM             CDF output/d_vdsum.nc
D_WSCAL             CDF output/d_wscal.nc
D_NPP               CDF output/d_npp.nc
D_GPP               CDF output/d_gpp.nc
D_RD                CDF output/d_rd.nc
D_RROOT             CDF output/d_rroot.nc
D_RSO               CDF output/d_rso.nc
D_RPOOL             CDF output/d_rpool.nc
D_GRESP             CDF output/d_gresp.nc
D_TRANS             CDF output/d_trans.nc
D_EVAP              CDF output/d_evap.nc
D_PREC              CDF output/d_prec.nc
D_PERC              CDF output/d_perc.nc
D_IRRIG             CDF output/d_irrig.nc
D_W0                CDF output/d_w0.nc
D_W1                CDF output/d_w1.nc
D_WEVAP             CDF output/d_wevap.nc
D_HI                CDF output/d_hi.nc
D_FHIOPT            CDF output/d_fhiopt.nc
D_HIMIND            CDF output/d_himind.nc
D_FROOT             CDF output/d_froot.nc
D_TEMP              CDF output/d_temp.nc
D_SUN               CDF output/d_sun.nc
D_PAR               CDF output/d_par.nc
D_DAYLENGTH         CDF output/d_daylength.nc
D_PET               CDF output/d_pet.nc
#endif                                             
/*------------------- ------------------------------- */
END
#ifdef DAILY_OUTPUT
TEMPERATE_CEREALS  /* CFT for daily output */
DAILY_RAINFED      /* irrigation flag for daily output */
#endif
#endif

/*===================================================================*/
/*  V. Run settings section                                          */
/*===================================================================*/

[FIRST_CELL] /* first grid cell */
[LAST_CELL] /* */ /*1843*/ /*66895*/ /* last grid cell  */


#ifndef FROM_RESTART

0  /* spinup years */ 
/*30*/   /* cycle length during spinup (yr) */
[STARTYEAR_LPJ] /* first year of simulation */
[ENDYEAR] /* last year of simulation */
[STARTYEAR] /* first year image coupling */
NO_RESTART /* do not start from restart file */
RESTART /* create restart file: the last year of simulation=restart-year */
output/restart.lpj /* filename of restart file */
[ENDYEAR] /* write restart at year; exclude line in case of no restart to be written */

#else

0    /* spinup years */
/* exclude next line in case of 0 spinup years */
/*10*/ /*  cycle length during spinup (yr)*/ 
[STARTYEAR_LPJ] /* first year of simulation */
[ENDYEAR] /* last year of simulation */
[STARTYEAR] /* first year image coupling */
RESTART /* start from restart file */
input_data/restart.lpj /* filename of restart file */
RESTART /* create restart file */
output/restart2.lpj /* filename of restart file */
[ENDYEAR] /* write restart at year; exclude line in case of no restart to be written */

#endif