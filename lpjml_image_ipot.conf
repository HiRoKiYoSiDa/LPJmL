/**************************************************************************************/
/**                                                                                \n**/
/**                   l  p  j  m  l  .  c  o  n  f                                 \n**/
/**                                                                                \n**/
/** Default configuration file for couled IMAGE_LPJmL run                          \n**/
/**                                                                                \n**/
/** Configuration file is divided into five sections:                              \n**/
/**                                                                                \n**/
/**  I.   Simulation description and type section                                  \n**/
/**  II.  Input parameter section                                                  \n**/
/**  III. Input data section                                                       \n**/
/**  IV.  Output data section                                                      \n**/
/**  V.   Run settings section                                                     \n**/
/**                                                                                \n**/
/** (C) Potsdam Institute for Climate Impact Research (PIK), see COPYRIGHT file    \n**/
/** authors, and contributors see AUTHORS file                                     \n**/
/** This file is part of LPJmL and licensed under GNU AGPL Version 3               \n**/
/** or later. See LICENSE file or go to http://www.gnu.org/licenses/               \n**/
/** Contact: https://github.com/PIK-LPJmL/LPJmL                                    \n**/
/**                                                                                \n**/
/**************************************************************************************/

#include "include/conf.h" /* include constant definitions */

#define FROM_RESTART /* run from restart */
#define RIVER_ROUTING /*river routing enabled; exclude this line to disable river routing */
#define ISRANDOM      /* random generation of daily precipitation */
//#define BENCHMARK_LAI 5 /* also set value here directly (1 to 7), not in /par/param.par */
#define WITH_LAIMAX_CFT
#define PERMAFROST
#define GSI_PHENOLOGY
#ifdef FROM_RESTART
#define WITH_RESERVOIRS
/*#define WITH_WATERUSE*/
#define WITH_LANDUSE LANDUSE /* landuse options: NO_LANDUSE (natural vegetation), LANDUSE (cropfracs from input), CONST_LANDUSE (landuse extent fixed, year specified in param.par), ALL_CROPS (all crops cultivated in all cells, requires POT_IRRIGATION) */
#endif
#define IRRIGATION POT_IRRIGATION /* irrigation options: NO_IRRIGATION (irrigated cropfracs added to rain-fed), LIM_IRRIGATION (requires #define RIVER_ROUTING), POT_IRRIGATION, ALL_IRRIGATION (rain-fed cropfracs added to irrigation) */
/*#define FIX_SDATES: fix sowing dates after year specified in param.par; READ_SDATES: read sowing dates from file */
/*#define WITH_FIREWOOD*/
/*#define WITH_GRIDBASED   grid based PFT output enabled */
/*#define DAILY_OUTPUT*/
#define WITH_GROUNDWATER_IRRIG

/*===================================================================*/
/*  I. Simulation description and type section                       */
/*===================================================================*/

"LPJmL Run" /* Simulation description */
LPJML_IMAGE                    /*LPJML Simulation type with managed land use */
#ifdef ISRANDOM
RANDOM_PREC /* Random weather generator for precipitation enabled */
10 /* seed for random number generator */
#else
INTERPOLATE_PREC
#endif
#ifdef USE_RADIATION
RADIATION
#else
CLOUDINESS
#endif
#ifdef WITH_SPITFIRE
SPITFIRE
NESTEROV_INDEX
#else
FIRE                 /* fire disturbance enabled */
#endif
#ifdef WITH_FIREWOOD
FIREWOOD
#ifndef WITH_LANDUSE
#define WITH_LANDUSE 0
#endif
#else
NO_FIREWOOD
#endif
#if defined(WITH_SPITFIRE) || defined(WITH_FIREWOOD)
#ifndef FROM_RESTART
NO_POPULATION
#else
POPULATION
#endif
#else
NO_POPULATION
#endif
#ifdef USE_BURNTAREA
PRESCRIBE_BURNTAREA
#else
NO_PRESCRIBE_BURNTAREA
#endif
#ifdef USE_LANDCOVER
LANDCOVERFPC /* LANDCOVEREST to prescribe establishment or LANDCOVERFPC to prescribe maximum FPC */
#else
NO_LANDCOVER
#endif
#ifdef GSI_PHENOLOGY
NEW_PHENOLOGY
#else
OLD_PHENOLOGY
#endif
OLD_TRF
#ifdef RIVER_ROUTING
DRAINAGE
#else
NO_DRAINAGE
#endif
#ifdef PERMAFROST
PERM
#else
NO_PERM
#endif
#ifdef WITH_LANDUSE
#if WITH_LANDUSE == CONST_LANDUSE
CONST_LANDUSE
2000      /* set landuse year for LANDUSE_CONST case */
#elif WITH_LANDUSE == ALL_CROPS
ALL_CROPS
2000      /* set landuse year for LANDUSE_CONST case */
#elif WITH_LANDUSE == NO_LANDUSE
NO_LANDUSE
#undef WITH_LANDUSE
#else 
LANDUSE
#endif
#else
NO_LANDUSE
#endif /* WITH_LANDUSE is no longer defined, if WITH_LANDUSE NO_LANDUSE was set above */
#ifdef WITH_LANDUSE
#if defined(FIX_SDATES)
FIXED_SDATE
1970      /* year in which sowing dates shall be fixed */
#elif defined(READ_SDATES)
PRESCRIBED_SDATE
1970      /* year in which sowing dates shall be fixed */
#else
NO_FIXED_SDATE
#endif
IRRIGATION /* NO_IRRIGATION, LIM_IRRIGATION, POT_IRRIGATION, ALL_IRRIGATION */
1          /* intercrops on setaside (0:FALSE, 1:TRUE) */
0          /* remove residuals (0:FALSE, 1:TRUE) */
0          /* fire in  residuals (0:FALSE, 1:TRUE) */
#ifdef WITH_RWMANAGEMENT
RWMANAGEMENT
#else
NO_RWMANAGEMENT
#endif
#ifdef BENCHMARK_LAI
CONST_LAI_MAX
BENCHMARK_LAI
#undef WITH_LAIMAX_CFT
#else
#ifdef WITH_LAIMAX_CFT
LAIMAX_CFT /* laimax values from manage parameter file */
#else
LAIMAX_INTERPOLATE
#endif
#endif
#ifdef RIVER_ROUTING
#ifdef WITH_RESERVOIRS
RESERVOIR
#else
NO_RESERVOIR
#endif
#ifdef WITH_GROUNDWATER_IRRIG
GROUNDWATER_IRRIG
#else
NO_GROUNDWATER_IRRIG
#endif
#ifdef WITH_AQUIFER_IRRIG
AQUIFER_IRRIG
#else
NO_AQUIFER_IRRIG
#endif
#endif
#ifdef WITH_FIXED_GRASS_PFT
GRASS_FIXED_PFT
#else
NO_GRASS_FIXED_PFT
#endif
NO_GRASS_HARVEST_OPTIONS
#endif
#if defined(WITH_WATERUSE) && defined(WITH_LANDUSE)
WATERUSE
#else
NO_WATERUSE
#endif

/*===================================================================*/
/*  II. Input parameter section                                      */
/*===================================================================*/

#include "param_wp.conf"    /* Input parameter file */

/*===================================================================*/
/*  III. Input data section                                          */
/*===================================================================*/

#include "input_image_win.conf"    /* Input files of CRU dataset */

#ifdef WITH_WATERUSE
input/wateruse1901_2003.bin /* water consumption for industry,household and livestock */
#endif

/*===================================================================*/
/*  IV. Output data section                                          */
/*===================================================================*/

#ifdef WITH_GRIDBASED
GRIDBASED
#define SUFFIX grid.bin
#else
PFTBASED
#define SUFFIX pft.bin
#endif

#ifndef FROM_RESTART

END	            /* no output files */

#else

/*
ID                  fmt filename
------------------- --- ----------------------------- */
GRID                RAW output/grid.bin
//FPC                 RAW output/fpc.bin
//MNPP                RAW output/mnpp.bin
/*MGPP                RAW output/mgpp.bin*/
//MRH                 RAW output/mrh.bin
/*MFPAR               RAW output/mfpar.bin*/
//MTRANSP             RAW output/mtransp.bin
//MRUNOFF             RAW output/mrunoff.bin
//MEVAP               RAW output/mevap.bin
//MINTERC             RAW output/minterc.bin
/*MSWC1               RAW output/mswc1.bin*/
/*MSWC2               RAW output/mswc2.bin*/
MIRRIG              RAW output/mirrig.bin
MCONV_LOSS_DRAIN    RAW output/mconv_loss.bin
MCONV_LOSS_EVAP     RAW output/mconv_loss.bin
/*AIRRIG	            RAW output/airrig.bin*/
/*ACONV_LOSS          RAW output/aconv_loss.bin*/
//FIREC               RAW output/firec.bin
/*FIREF               RAW output/firef.bin*/
//VEGC                RAW output/vegc.bin
//SOILC               RAW output/soilc.bin
//LITC                RAW output/litc.bin
//PROD_TURNOVER       RAW output/prod_turnover.bin
//DEFOREST_EMIS       RAW output/deforest_emis.bin
//TRAD_BIOFUEL        RAW output/trad_biofuel.bin
/*MTEMP_IMAGE         RAW output/mtemp_image.bin*/
/*MPREC_IMAGE         RAW output/mprec_image.bin*/
/*MSUN_IMAGE          RAW output/msun_image.bin*/
/*MWET_IMAGE          RAW output/mwet_image.bin*/
/*FBURN               RAW output/fburn.bin*/
/*FTIMBER             RAW output/ftimber.bin*/
//TIMBER_HARVEST      RAW output/timber_harvest.bin
//PRODUCT_POOL_FAST   RAW output/product_pool_fast.bin
//PRODUCT_POOL_SLOW   RAW output/product_pool_slow.bin
/*LUC_IMAGE           RAW output/luc_image.bin*/
/*PFT_GCGP            RAW output/waterstress.bin */ 
//PFT_NPP             RAW output/pft_npp.bin
//FLUX_ESTAB          RAW output/flux_estab.bin
#ifdef WITH_LANDUSE
//HARVEST             RAW output/flux_harvest.bin
SDATE               RAW output/sdate.bin
PFT_HARVEST         RAW output/pft_harvest.bin
/*PFT_RHARVEST        RAW output/pft_rharvest.bin*/
CFTFRAC             RAW output/cftfrac.bin
#endif
#ifdef WITH_FIREWOOD
/*FLUX_FIREWOOD       RAW output/flux_firewood.bin*/
#endif
/*APREC               RAW output/aprec.bin*/
#ifdef RIVER_ROUTING
//INPUT_LAKE          RAW output/input_lake.bin
//MEVAP_LAKE          RAW output/mevap_lake.bin
//ADISCHARGE          RAW output/adischarge.bin
MDISCHARGE          RAW output/mdischarge.bin
//YDISCHARGE     	    RAW output/ydischarge.bin
#ifdef WITH_RESERVOIRS
//MRES_CAP	    RAW output/mres_cap.bin
//MRES_STORAGE	    RAW output/mres_storage.bin
#endif
#endif
#ifdef DAILY_OUTPUT
D_LAI               RAW output/d_lai.bin
D_PHEN              RAW output/d_phen.bin
D_CLEAF             RAW output/d_cleaf.bin
D_CROOT             RAW output/d_croot.bin
D_CSO               RAW output/d_cso.bin
D_CPOOL             RAW output/d_cpool.bin
D_WDF               RAW output/d_wdf.bin
D_GROWINGDAY        RAW output/d_growingday.bin
D_PVD               RAW output/d_pvd.bin
D_PHU               RAW output/d_phu.bin
D_FPHU              RAW output/d_fphu.bin
D_LAIMAXAD          RAW output/d_laimax_adjusted.bin
D_LAINPPDEF         RAW output/d_laimaxnppdeficit.bin
D_HUSUM             RAW output/d_husum.bin
D_VDSUM             RAW output/d_vdsum.bin
D_WSCAL             RAW output/d_wscal.bin
D_NPP               RAW output/d_npp.bin
D_GPP               RAW output/d_gpp.bin
D_RD                RAW output/d_rd.bin
D_RROOT             RAW output/d_rroot.bin
D_RSO               RAW output/d_rso.bin
D_RPOOL             RAW output/d_rpool.bin
D_GRESP             RAW output/d_gresp.bin
D_TRANS             RAW output/d_trans.bin
D_EVAP              RAW output/d_evap.bin
D_PREC              RAW output/d_prec.bin
D_PERC              RAW output/d_perc.bin
D_IRRIG             RAW output/d_irrig.bin
D_W0                RAW output/d_w0.bin
D_W1                RAW output/d_w1.bin
D_WEVAP             RAW output/d_wevap.bin
D_HI                RAW output/d_hi.bin
D_FHIOPT            RAW output/d_fhiopt.bin
D_HIMIND            RAW output/d_himind.bin
D_FROOT             RAW output/d_froot.bin
D_TEMP              RAW output/d_temp.bin
D_SUN               RAW output/d_sun.bin
D_PAR               RAW output/d_par.bin
D_DAYLENGTH         RAW output/d_daylength.bin
D_PET               RAW output/d_pet.bin
#endif                                             
/*------------------- ------------------------------- */
END
#ifdef DAILY_OUTPUT
TEMPERATE_CEREALS  /* CFT for daily output */
DAILY_RAINFED      /* irrigation flag for daily output */
#endif
#endif

/*===================================================================*/
/*  V. Run settings section                                          */
/*===================================================================*/

[FIRST_CELL] /* first grid cell */
[LAST_CELL] /* */ /*1843*/ /*66895*/ /* last grid cell  */


#ifndef FROM_RESTART

0  /* spinup years */ 
/*30*/   /* cycle length during spinup (yr) */
[STARTYEAR_LPJ] /* first year of simulation */
[ENDYEAR] /* last year of simulation */
[STARTYEAR] /* first year image coupling */
NO_RESTART /* do not start from restart file */
RESTART /* create restart file: the last year of simulation=restart-year */
output/restart.lpj /* filename of restart file */
[ENDYEAR] /* write restart at year; exclude line in case of no restart to be written */

#else

0    /* spinup years */
/* exclude next line in case of 0 spinup years */
/*10*/ /*  cycle length during spinup (yr)*/ 
[STARTYEAR_LPJ] /* first year of simulation */
[ENDYEAR] /* last year of simulation */
[STARTYEAR] /* first year image coupling */
RESTART /* start from restart file */
input_data/restart.lpj /* filename of restart file */
RESTART /* create restart file */
output/restart2.lpj /* filename of restart file */
[ENDYEAR] /* write restart at year; exclude line in case of no restart to be written */

#endif
